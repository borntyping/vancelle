{% macro small_card(details, href) %}
  <div class="card small-card">
    <div class="card-image">
      <figure class="image is-2by3 has-background-info-light" title="{{ details.title }}, {{ details.author|absent }}">
        {% if details.cover %}
          <a href="{{ href }}" title="{{ details.title }}"><img src="{{ details.cover }}" alt="" loading="lazy" referrerpolicy="no-referrer"></a>
        {% endif %}
      </figure>
    </div>
    <div class="card-content p-3">
      <p class="title is-6"><a href="{{ href }}" title="{{ details.title }}">{{- details.title -}}</a></p>
      <p class="subtitle is-6" title="{{ details.author|absent }}">{{- details.author|absent -}}</p>
    </div>
    <div class="card-footer">
      {{ caller() }}
    </div>
  </div>
{% endmacro %}

{% macro small_card_list(items, empty="No items!") %}
  <div class="columns is-multiline is-mobile">
    {% for item in items %}
      <div class="column is-half-mobile is-2-tablet">
        {{ caller(item) }}
      </div>
    {% else %}
      <div class="column is-full">
        <div class="content">
          <div class="card">
            <div class="card-content">
              <p>{{ empty }}</p>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endmacro %}


{% macro change_status(media) %}
  {% set record = media.get_record() %}
  <div class="p-3" style="width: 100%">
    <form hx-post="{{ url_for('media.change_status') }}" hx-trigger="keyup changed from:input, change">
      <input type="hidden" name="work_id" value="{{ media.id }}">
      <div class="field">
        <label
          for="status-{{ media.id }}" class="status is-hidden">Status</label>
        <div class="select is-small is-fullwidth">
          <select name="status" id="status-{{ media.id }}">
            {% for status in RecordStatus %}
              <option
                value="{{ status.value }}"
                {% if record and record.status.value == status.value %}selected{% endif %}>{{ status.description }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </form>
  </div>
{% endmacro %}
